(this["webpackJsonpimage-defrag"]=this["webpackJsonpimage-defrag"]||[]).push([[0],{11:function(e,t,n){},13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(5),u=n.n(c),o=(n(11),n(3)),i=n(1),s=n.n(i),l=n(2),f=(n(13),function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type.match("image.*")){e.next=2;break}throw new Error('"'.concat(t.type,'" is not an image'));case 2:return(n=new FileReader).readAsDataURL(t),e.abrupt("return",new Promise((function(e,t){n.onload=function(t){e(t.target.result)},n.onerror=t,n.onabort=t})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m=function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src=t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:return n=e.sent,(r=document.createElement("canvas")).width=n.width,r.height=n.height,(a=r.getContext("2d")).drawImage(n,0,0),e.abrupt("return",a.getImageData(0,0,n.width,n.height));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e){var t=document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("Couldn't get canvas context");return t.width=e.width,t.height=e.height,n.putImageData(e,0,0),t.toDataURL()},h=function(e){var t=e.data,n=[];console.log("Extracting pixel data...");for(var r=0;r<t.length-3;r+=4)n.push([t[r],t[r+1],t[r+2],t[r+3]]);console.log("Defragmenting pixels"),n.sort((function(e,t){var n=Object(o.a)(e,4),r=n[0],a=n[1],c=n[2],u=n[3],i=Object(o.a)(t,4),s=i[0],l=i[1],f=i[2],m=i[3];return r!==s?r-s:a!==l?a-l:c!==f?c-f:u!==m?u-m:0})),console.log("Done!");var a=new Uint8ClampedArray(n.flat());return new ImageData(a,e.width,e.height)},d=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t);case 2:return n=e.sent,r=h(n),e.abrupt("return",g(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var w=function(){var e=Object(r.useState)(),t=Object(o.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(),i=Object(o.a)(u,2),m=i[0],p=i[1],g=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.files){e.next=2;break}return e.abrupt("return");case 2:return n=t.target.files[0],e.next=5,f(n);case 5:return r=e.sent,c(r),p(void 0),e.next=10,d(r);case 10:a=e.sent,p(a);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("div",{className:"App"},a.a.createElement("header",null,a.a.createElement("h1",null,"Image Defrag"),a.a.createElement("input",{type:"file",onChange:g})),n&&a.a.createElement("main",null,a.a.createElement("section",null,a.a.createElement("h2",null,"Original"),a.a.createElement("img",{alt:"original",src:n})),a.a.createElement("section",null,m?a.a.createElement("h2",null,"Defragmented"):a.a.createElement("h2",null,"Defragmenting..."),m&&a.a.createElement("img",{alt:"defragmented",src:m}))))};u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(w,null)),document.getElementById("root"))},6:function(e,t,n){e.exports=n(14)}},[[6,1,2]]]);
//# sourceMappingURL=main.428fec33.chunk.js.map